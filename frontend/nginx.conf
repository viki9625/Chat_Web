# This is the Nginx configuration for serving the React app

server {
  # Listen on port 80
  listen 80;

  # Define the root directory where the static files are located
  root /usr/share/nginx/html;

  # This is the default file to serve
  index index.html index.htm;

  # This is the crucial part for single-page applications (SPAs)
  # It tries to find a file with the requested URI. If it fails,
  # it tries to find a directory. If that also fails, it falls back
  # to serving /index.html. This allows the React Router to handle the URL.
  location / {
    try_files $uri $uri/ /index.html;
  }

  # Optional: Add headers to prevent caching issues
  location ~* \.(?:css|js)$ {
    expires 1y;
    add_header Cache-Control "public";
  }
}
